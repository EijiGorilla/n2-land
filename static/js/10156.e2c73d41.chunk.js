"use strict";(self.webpackChunkn2_land=self.webpackChunkn2_land||[]).push([[10156],{10156:(t,e,n)=>{n.r(e),n.d(e,{assetMapFromAssetMapsJSON:()=>d,extractMesh:()=>m,meshFeatureSetFromJSON:()=>g});var o=n(39356),r=n(76460),s=n(87663),a=n(76797),i=n(47594),l=n(13312),u=n(57045),c=n(19463),p=n(77725),f=n(74159);const h=()=>r.A.getLogger("esri.rest.support.meshFeatureSet");function g(t,e,n){const r=n.features;n.features=[],delete n.geometryType;const s=p.A.fromJSON(n);if(s.geometryType="mesh",!n.assetMaps)return s;const a=d(e,n.assetMaps),i=t.sourceSpatialReference??l.A.WGS84,u=n.globalIdFieldName,{outFields:c}=t,f=null!=c&&c.length>0?(h=c.includes("*")?null:new Set(c),t=>{let{attributes:e}=t;if(!e)return{};if(!h)return e;for(const n in e)h.has(n)||delete e[n];return e}):()=>({});var h;for(const l of r){const t=m(l,u,i,e,a);s.features.push(new o.A({geometry:t,attributes:f(l)}))}return s}function m(t,e,n,o,r){const s=t.attributes[e],l=r.get(s);if(null==l||!t.geometry)return null;const c=(0,f.V)(t.attributes,n,o.transformFieldRoles),p=a.A.fromJSON(t.geometry);p.spatialReference=n;const h=(0,f.f)(t.attributes,o.transformFieldRoles),g=n.isGeographic?"local":"georeferenced",m=function(t){const e=Array.from(t.files.values()),n=new Array;for(const o of e){if(o.status!==y.COMPLETED)return null;const t=new Array;for(const e of o.parts){if(!e)return null;t.push(new u.Bq(e.url,e.hash))}n.push(new u.Qp(o.name,o.mimeType,t))}return{type:"service",assets:n}}(l);return m?i.default.createWithExternalSource(c,m,{extent:p,transform:h,vertexSpace:g,unitConversionDisabled:!0}):i.default.createIncomplete(c,{extent:p,transform:h,vertexSpace:g})}var y,A;function d(t,e){const n=new Map;for(const o of e){const e=o.parentGlobalId;if(null==e)continue;const r=o.assetName,a=o.assetType,i=o.assetHash,l=o.assetURL,u=o.conversionStatus,p=o.seqNo,f=(0,c.Fm)(a,t.supportedFormats);if(!f){h().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${a}, but it does not list it as a supported type`);continue}const g=(0,s.tE)(n,e,(()=>({files:new Map})));(0,s.tE)(g.files,r,(()=>({name:r,type:a,mimeType:f,status:M(u),parts:[]}))).parts[p]={hash:i,url:l}}return n}function M(t){switch(t){case"COMPLETED":case"SUBMITTED":return y.COMPLETED;case"INPROGRESS":return y.PENDING;default:return y.FAILED}}(A=y||(y={}))[A.FAILED=0]="FAILED",A[A.PENDING=1]="PENDING",A[A.COMPLETED=2]="COMPLETED"},32186:(t,e,n)=>{n.d(e,{A:()=>g});var o,r=n(35143),s=n(42553),a=n(46053),i=(n(81806),n(76460),n(47249),n(85842)),l=n(34761),u=n(13191),c=n(60008),p=n(4336),f=n(9392),h=n(52896);let g=class extends s.A{static#t=(()=>o=this)();constructor(t){super(t),this.translation=(0,f.vt)(),this.rotationAxis=(0,f.ci)(h.up),this.rotationAngle=0,this.scale=(0,f.fA)(1,1,1)}get rotation(){return(0,h.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,f.o8)((0,h.yo)(t)),this.rotationAngle=(0,h.g7)(t)}get localMatrix(){const t=(0,u.vt)();return(0,c.x8)(m,(0,h.yo)(this.rotation),(0,h.$I)(this.rotation)),(0,l.o1)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.B8)((0,u.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,l.t2)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,f.o8)(this.translation),rotationAxis:(0,f.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,f.o8)(this.scale)};return new o(t)}};(0,r._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"translation",void 0),(0,r._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"rotationAxis",void 0),(0,r._)([(0,a.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"rotationAngle",void 0),(0,r._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"scale",void 0),(0,r._)([(0,a.MZ)()],g.prototype,"rotation",null),(0,r._)([(0,a.MZ)()],g.prototype,"localMatrix",null),(0,r._)([(0,a.MZ)()],g.prototype,"localMatrixInverse",null),g=o=(0,r._)([(0,i.$)("esri.geometry.support.MeshTransform")],g);const m=(0,p.vt)()},74159:(t,e,n)=>{n.d(e,{V:()=>s,f:()=>a});var o=n(19247),r=n(32186);function s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new o.A({x:t[n.originX],y:t[n.originY],z:t[n.originZ],spatialReference:e})}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return new r.A({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}const i={originX:"originX",originY:"originY",originZ:"originZ",translationX:"translationX",translationY:"translationY",translationZ:"translationZ",scaleX:"scaleX",scaleY:"scaleY",scaleZ:"scaleZ",rotationX:"rotationX",rotationY:"rotationY",rotationZ:"rotationZ",rotationDeg:"rotationDeg"}}}]);
//# sourceMappingURL=10156.e2c73d41.chunk.js.map